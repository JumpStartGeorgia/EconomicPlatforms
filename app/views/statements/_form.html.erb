<%= semantic_form_for(@statement) do |f| %>
	<%= f.error_messages %>


	<%= f.inputs do %>
		<%= f.input :date_made, :as => :string, :input_html => {:size => 20} %>
		<%= f.input :political_party %>
		<%= f.input :economic_category %>
	<% end %>

  <%= f.inputs :for => :statement_translations do |translation, i| %>

  	<% formLocale = I18n.available_locales[i-1] %>

  	<div id="form-<%= formLocale %>" class="multilanguage">
  		<h3><%= t("app.language.#{formLocale}") %></h3>

  		<%= translation.input :source %>
  		<%= translation.input :author %>
  		<%= translation.input :statement_made, :as => :text, :input_html => {:rows => 4, :cols => 100} %>
  		<%= translation.input :analysis, :as => :text, :input_html => {:rows => 4, :cols => 100} %>
  		<%= translation.hidden_field :locale , :value => formLocale %>
  	</div>

  <% end %>

  <% # when loading an existing record the scores must be ordered or the radio buttons will not be selected 
    if params[:action] == "new"  
      score_objs = @statement.statement_scores
    else
      score_objs = @statement.statement_scores.ordered
    end %>

  <% score_objs.each_with_index do |score, i| %>
    <% if @indicator_categories && !@indicator_categories.empty? %>
  		<%= f.fields_for :statement_scores, score do |scores| %>
  			<% cat = @indicator_categories[i] %>
  			<% if cat && !cat.indicators.nil? && !cat.indicators.empty? %>
  	  		<%= scores.hidden_field :indicator_category_id , :value => cat.id %>
  				<%= scores.input :combined, :as => :radio, 
  				  :collection => cat.indicators.map{|x| ["#{x.value} - #{x.name}", "#{x.id}||#{x.value}"]}, 
  				  :label => cat.name %>
  			<% end %>
  		<% end %>
  	<% end %>
  <% end %>




  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
	  <%= f.submit nil, :class => 'btn btn-warning', :type => :reset, :value => t('app.buttons.reset'), :name => :reset %>
	  <%= link_to t('app.buttons.cancel'), statements_path, :class => 'btn btn-mini btn-warning' %>
  </div>
<% end %>
