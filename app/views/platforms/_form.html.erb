<%= semantic_nested_form_for @platform, :html => { :multipart => true } do |f| %>
	<%= f.error_messages %>

	<%= f.inputs do %>
		<%= f.input :political_party %>
		<%= f.input :economic_category %>
	<% end %>

  <% @platform.platform_translations.sort{|x,y| x.locale <=> y.locale}.each do |trans| %>
		<%= f.fields_for :platform_translations, trans do |translation| %>

			<div id="form-<%= trans.locale %>" class="multilanguage">
				<h3><%= t("app.language.#{trans.locale}") %></h3>

				<%= translation.input :description, :as => :text, :input_html => {:rows => 4} %>
				<%= translation.hidden_field :locale , :value => trans.locale %>
			</div>

		<% end %>
	<% end %>

	<div id="nested_form_container">
		<h3><%= t("app.common.files") %></h3>
		<%= f.fields_for :platform_files %>
		<p><%= f.link_to_add t(".add_file"), :platform_files, :class => "btn btn-mini btn-primary" %></p>
	</div>

  <% order_scores(@platform.platform_scores).each do |score| %>
    <% if @indicator_categories && !@indicator_categories.empty? %>
  		<%= f.fields_for :platform_scores, score do |scores| %>
  			<% cat = @indicator_categories.select{|x| x.id == score.indicator_category_id} %>
  			<% if cat && !cat.first.indicators.nil? && !cat.first.indicators.empty? %>
					<div class="radio_button_scores">
			  		<%= scores.hidden_field :indicator_category_id , :value => cat.first.id %>
						<%= scores.input :combined, :as => :radio,
						  :collection => cat.first.indicators.map{|x| ["#{x.value} - #{x.name}", "#{x.id}||#{x.value}"]},
						  :label => cat.first.name %>
					</div>
  			<% end %>
  		<% end %>
  	<% end %>
  <% end %>

	<hr />
	<%= f.inputs do %>
		<%= f.input :is_public, :as => :radio %>
	<% end %>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
	  <%= f.submit nil, :class => 'btn btn-warning', :type => :reset, :value => t('app.buttons.reset'), :name => :reset %>
	  <%= link_to t('app.buttons.cancel'), platforms_path, :class => 'btn btn-mini btn-warning' %>
  </div>
<% end %>
